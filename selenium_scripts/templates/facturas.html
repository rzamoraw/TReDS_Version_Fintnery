{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Mis Facturas</h2>
        <a href="/proveedor/logout" class="btn btn-outline-secondary">
            Cerrar sesiÃ³n
        </a>
    </div>

<!-- â”€â”€â”€â”€â”€â”€ 1. Carga desde ZIP / XML â”€â”€â”€â”€â”€â”€ -->
<h5 class="mt-4">Opciones de carga</h5>

<form action="/proveedor/facturas"
      method="post"
      enctype="multipart/form-data"
      class="mb-3">
    <label class="form-label fw-semibold me-2">
        Subir archivo (XML o ZIP):
    </label>
    <input type="file"
           name="archivo"
           accept=".xml,.zip"
           class="form-control d-inline-block w-auto me-2"
           required>
    <button class="btn btn-primary">
        ðŸ“¤ Cargar
    </button>
</form>

<!-- â”€â”€â”€â”€â”€â”€ 2. Carga desde archivo JSON generado por SII â”€â”€â”€â”€â”€â”€ -->
<form action="/proveedor/importar_sii_facturas" method="get" class="mb-3">
    <button class="btn btn-secondary">
        ðŸ“¥ Importar desde SII (Ãºltima descarga)
    </button>
</form>

<!-- â”€â”€â”€â”€â”€â”€ 3. Carga manual colapsable â”€â”€â”€â”€â”€â”€ -->
<p>
    <a class="btn btn-sm btn-outline-info"
       data-bs-toggle="collapse"
       href="#collapseManual"
       role="button"
       aria-expanded="false"
       aria-controls="collapseManual">
        âž• Cargar factura manualmente
    </a>
</p>
<div class="collapse" id="collapseManual">
    <div class="card card-body mb-4">
        <form action="/proveedor/facturas" method="post" class="row g-3">
            <div class="col-md-2">
                <label class="form-label">Folio</label>
                <input type="number" name="folio" class="form-control" required>
            </div>
            <div class="col-md-2">
                <label class="form-label">RUT Receptor</label>
                <input type="text" name="rut_receptor" class="form-control" required>
            </div>
            <div class="col-md-2">
                <label class="form-label">RazÃ³n Social Receptor</label>
                <input type="text" name="razon_social_receptor" class="form-control" required>
            </div>
            <div class="col-md-2">
                <label class="form-label">Tipo DTE</label>
                <input type="text" name="tipo_dte" class="form-control" required>
            </div>
            <div class="col-md-2">
                <label class="form-label">Monto</label>
                <input type="number" name="monto" class="form-control" required>
            </div>
            <div class="col-md-2">
                <label class="form-label">F. EmisiÃ³n</label>
                <input type="date" name="fecha_emision" class="form-control" required>
            </div>
            <div class="col-md-2">
                <label class="form-label">F. Venc.</label>
                <input type="date" name="fecha_vencimiento" class="form-control" required>
            </div>
            <div class="col-12 text-end">
                <button class="btn btn-success">
                    Guardar factura
                </button>
            </div>
        </form>
        <small class="text-muted">
            *Este formulario es opcional. Si no lo vas a usar, simplemente ignÃ³ralo; el backend
            seguirÃ¡ funcionando igual.
        </small>
    </div>
</div>  
